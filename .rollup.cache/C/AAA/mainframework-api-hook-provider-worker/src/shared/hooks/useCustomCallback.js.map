{"version":3,"file":"useCustomCallback.js","sourceRoot":"","sources":["useCustomCallback.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,OAAO,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,OAAO,EAAE,MAAM,8BAA8B,CAAC;AAEvD,MAAM,CAAC,MAAM,iBAAiB,GAAG,CAAoC,QAAW,EAAE,YAAuB,EAAK,EAAE;IAC9G,MAAM,WAAW,GAAG,MAAM,CAAI,QAAQ,CAAC,CAAC;IACxC,MAAM,eAAe,GAAG,MAAM,CAAY,YAAY,CAAC,CAAC;IAExD,0CAA0C;IAC1C,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;QACtF,eAAe,CAAC,OAAO,GAAG,YAAY,CAAC;QACvC,WAAW,CAAC,OAAO,GAAG,QAAQ,CAAC;IACjC,CAAC;IAED,gDAAgD;IAChD,MAAM,cAAc,GAAG,MAAM,CAAC,CAAC,GAAG,IAAmB,EAAiB,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC;IAE/G,OAAO,cAAmB,CAAC;AAC7B,CAAC,CAAC","sourcesContent":["\"use client\";\r\nimport { useRef } from \"react\";\r\nimport { isEqual } from \"@mainframework/is-deep-equal\";\r\n\r\nexport const useCustomCallback = <T extends (...args: any[]) => any>(callback: T, dependencies: unknown[]): T => {\r\n  const refCallback = useRef<T>(callback);\r\n  const refDependencies = useRef<unknown[]>(dependencies);\r\n\r\n  // Update refs synchronously during render\r\n  if (!dependencies.every((dep, index) => isEqual(dep, refDependencies.current[index]))) {\r\n    refDependencies.current = dependencies;\r\n    refCallback.current = callback;\r\n  }\r\n\r\n  // Stable callback, always calls latest callback\r\n  const stableCallback = useRef((...args: Parameters<T>): ReturnType<T> => refCallback.current(...args)).current;\r\n\r\n  return stableCallback as T;\r\n};\r\n"]}